<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="layout"
      th:with="module='chatRoom'">
<head>
    <title>聊天室-首页</title>
    <style type="text/css">

    </style>
</head>
<body layout:fragment="content">
<div class="layui-container">
    <!--主页面板-->
    <div class="layui-row" style="margin: 2px;">
        <div class="layui-card layui-col-xs12 layui-col-sm8 layui-col-md8">
            <div class="layui-card-header layui-bg-blue">共享聊天室
            </div>
            <div class="layui-card-body layui-row" style="border: 1px solid #b2b2b2;height: 75%;">
                <!--聊天记录区域-->
                <div class="layui-col-xs12 layui-col-sm8 layui-col-md8">
                    <div class="layui-col-xs12 layui-col-sm12 layui-col-md12" style="height: 80%;border: 1px solid #b2b2b2;">
                        <div style="height:98%;overflow: auto ;overflow-x: hidden;">
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                            43214341414134</br>
                        </div>
                    </div>
                    <div class="layui-col-xs12 layui-col-sm12 layui-col-md12" style="height: 20%;border: 1px solid #b2b2b2;">
                           输入框
                    </div>
                </div>
                <div class="layui-col-xs0 layui-col-sm4 layui-col-md4" style="height: 100%;border: 1px solid #b2b2b2;">
                        用户信息
                </div>
            </div>
        </div>

    <script th:inline="javascript">
        /*<![CDATA[*/
        var websocket = null;

        //判断当前浏览器是否支持WebSocket
        if('WebSocket' in window){
            websocket = new WebSocket("ws://localhost:8088/vv/crserver");
        }else if('MozWebSocket' in window){
            websocket = new MozWebSocket("ws://localhost:8088/vv/crserver");
        }else{
            alert('您的浏览器不支持websocket！！！')
        }

        //连接发生错误的回调方法
        websocket.onerror = function(){
        };

        //连接成功建立的回调方法
        websocket.onopen = function(event){
        }

        //接收到消息的回调方法
        websocket.onmessage = function(event){
        }

        //连接关闭的回调方法
        websocket.onclose = function(){
        }

        //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。
        window.onbeforeunload = function(){
        }

        //关闭连接
        function closeWebSocket(){
            websocket.close();
        }

        //发送消息
        function send(){
            //websocket.send(message);
        }

        /*]]>*/
    </script>
</div>
</body>
</html>